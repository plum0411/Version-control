# 版本控制

## **1.基本介紹 GIT 簡略歷史、使用緣由、何為版本控制？**

### **簡略歷史**

Git為分散式版本控制系統，為了更好管理Linux內核而開發

#### **2002年**

- Linus Benedict Torvalds本來決定使用BitKeeper作為Linux內核主要的版本控制系統用以維護程式碼。

#### **2005年**

- Andrew Tridgell寫了一個可以連接BitKeeper儲存庫的簡單程式，BitKeeper著作權擁有者認為Andrew Tridgell對BitKeeper內部使用的協定進行逆向工程，決定收回無償使用BitKeeper的授權。
- Linus Benedict Torvalds決定自行開發版本控制系統替代BitKeeper，以十天的時間編寫出git第一個版本，並於2005年以GPL授權條款釋出。

### **使用緣由**

開發人員可能需要花很多時間。重現 Bug、學習新工具，以及新增新功能或內容。 隨著使用者的需求相應增加，版本控制可協助小組一起運作並及時寄送。  

若沒有版本控制，開發人員會想要在其電腦上保留多個程式碼複本。 這樣容易在錯誤的程式碼複本中變更或刪除檔案或是在無意中覆蓋他人的編輯內容。版本控制系統可藉由管理所有版本的程式碼來解決此問題，但一次向小組呈現單一版本。

### **何為版本控制?**

#### **一、追蹤文件的變更**

版本控制將什麼時候、什麼人更改了文件的什麼內容等信息忠實地了記錄下來。每一次文件的改變，文件的版本號都將增加。

#### **二、並行開發**

軟件開發往往是多人協同作業，版本控制可以有效地解決版本的同步以及不同開發者之間的開發通信問題，提高協同開發的效率。並行開發中最常見的不同版本軟件的錯誤(Bug)修正問題也可以通過版本控制中分支與合併的方法有效地解決。

### **2.版本控制的邏輯說明**

版本控制系統是一段時間內協助追蹤程式碼變更的軟體。開發人員編輯程式碼時，版本控制系統會擷取檔案的快照集。版本控制會永久儲存該快照集，以便稍後視需要重新叫用。

### **3.Git 常用指令集介紹**

| 指令 | 功能 |
| ------------ | ------------ |
| git init  | 建立新的本地端 Repository  |
| git clone [Repository URL]  | 複製遠端的 Repository 檔案到本地端  |
| git status  | 複製遠端的 Repository 檔案到本地端  |
| git add [檔案或資料夾]  | 檢查本地端檔案異動狀態  |
| git commit  | 將指定的檔案（或資料夾）加入版本控制。用 `git add .` 可加入全部  |
| git commit -m "提交說明內容"  | 提交（commit）目前的異動  |
| git stash  | 提交（commit）目前的異動並透過 `-m` 參數設定摘要說明文字  |
| git log  | 獲取目前工作目錄的 dirty state，並保存到一個未完成變更的 stack，以方便隨時回復至當初的 state  |
| git push  | 將本地端 Repository 的 commit 發佈到遠端  |

### **4. .gitignore 配置**

#### **gitignore 檔的格式規範如下：**

- 所有空行或者以 # 開頭的行都會被 Git 忽略。
- 可以使用標準的 glob 模式匹配。
- 匹配模式可以以（/）開頭防止遞歸。
- 匹配模式可以以（/）結尾指定目錄。
- 要忽略指定模式以外的檔或目錄，可以在模式前加上驚嘆號（！）取反。

#### **所謂的 glob 模式是指 shell 所使用的簡化了的正則表示式。**

- 星號（*）匹配零個或多個任意字元;
- [abc]匹配任何一個列在方括弧中的字元（這個例子要麼匹配一個 a，要麼匹配一個 b，要麼匹配一個 c）;
- 問號（？）只匹配一個任意字元;
- 如果在方括弧中使用短劃線分隔兩個字元，表示所有在這兩個字元範圍內的都可以匹配（比如 [0-9] 表示匹配所有 0 到 9 的數位）。
- 使用兩個星號（） 表示匹配任意中間目錄，比如可以匹配 a/z， a/b/z 或 a/b/c/z等。**a/**/z

### **5.分支的使用方法**

透過 git branch 指令得知已經擁有的分支
透過git checkout -b [BranchName]指令建立分支，並將目前工作目錄切換到新的分支
以下為分支其他的常用指令

| 指令 | 功能 |
| ------------ | ------------ |
|git push origin [BRANCH_NAME]|發佈至遠端指定的分支（Branch）|
|git branch|查看分支|
|git branch [BRANCH_NAME]|建立分支|
|git checkout [BRANCH_NAME]|取出指定的分支|
|git checkout -b [BRANCH_NAME]|建立並跳到該分支|
|git branch -D [BRANCH_NAME]|強制刪除指定分支（須先切換至其他分支再做刪除）|
|git reset --hard [HASH]|強制恢復到指定的 commit（透過 Hash 值）|
|git checkout [HASH]|切換到指定的 commit（與`git checkout [BRANCH_NAME]`相同）|
|git branch -m <OLD_BRANCH_NAME> <NEW_BRANCH_NAME>|修改分支名稱|

### **6.Commit 介紹及使用**

>`git commit` ：將暫存區的檔案提交到儲存庫儲存  
>`git commit -m "修改記錄"`：說明這次的 commit 做了什麼事

#### **使用 git commit 指令一定要加上 -m"修改紀錄“ 訊息**

如果沒有輸入 -m 參數說明動作， Git 的預設不會讓你執行 Commit 這個動作。因為這則執行的目的是要告訴自己及其他人「這次的修改做了什麼」。

#### **「git commit 只會處理暫存區裡的內容」**

如果今天新增檔案或是更改什麼動作，沒有先使用 git add 指令把檔案提交到暫存區，那麼 git commit 指令就不會有所內容可以執行動作。

### **7.GitFlow 介紹**

Git flow是最早出現的一套流程，且廣泛被應用。
Git flow 提出不同的分支功能，分別有 master、develop 、hotfix、release、feature 五種分支。  
而這五個分支，根據他們的性質，又有其他稱法：

#### **長期分支 - master 分支、develop 分支**

原因：因 Master 與 Develop 分支會一直存活在整個 Git flow 裡，並不會被刪除掉。

#### **短期分支 - hotfix 分支、release 分支、feature 分支**

原因：當完成專案後，這些更新的版本都會被合併進 Master 或 Develop 分支 ，之後就會被刪除掉。
